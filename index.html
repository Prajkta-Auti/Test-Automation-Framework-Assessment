<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mock Fintech App</title>
</head>
<body>
  <h1>Mock Fintech App</h1>

  <h2>Create User</h2>
  <form id="userForm">
    <input type="text" id="name" placeholder="Full Name (e.g., Priya James)"
           pattern="[A-Z][a-z]+ [A-Z][a-z]+"
           title="Enter as Firstname Lastname, e.g., Priya James" required />
    <input type="email" id="email" placeholder="Email" required />
    <select id="accountType" required>
      <option value="">-- Select Account Type --</option>
      <option value="basic">Basic</option>
      <option value="premium">Premium</option>
    </select>
    <button type="submit">Create User</button>
  </form>
  <pre id="userResult"></pre>

  <h2>Create Transaction</h2>
  <form id="txForm">
    <input type="text" id="userId" placeholder="User ID" required />
    <input type="number" id="amount" placeholder="Amount" required />
    <input type="text" id="type" placeholder="Type (transfer)" required />
    <input type="text" id="recipientId" placeholder="Recipient ID" required />
    <button type="submit">Create Transaction</button>
  </form>
  <pre id="txResult"></pre>

  <script>
    document.getElementById("userForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const res = await fetch("/api/users", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          name: document.getElementById("name").value,
          email: document.getElementById("email").value,
          accountType: document.getElementById("accountType").value,
        }),
      });
      document.getElementById("userResult").textContent = JSON.stringify(await res.json(), null, 2);
    });

    document.getElementById("txForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const res = await fetch("/api/transactions", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          userId: document.getElementById("userId").value,
          amount: parseFloat(document.getElementById("amount").value),
          type: document.getElementById("type").value,
          recipientId: document.getElementById("recipientId").value,
        }),
      });
      document.getElementById("txResult").textContent = JSON.stringify(await res.json(), null, 2);
    });
  </script>
</body>
</html>
